{"version":3,"sources":["webpack:///./assets/js/theme/product.js","webpack:///./assets/js/theme/product/reviews.js","webpack:///./assets/js/theme/product/video-gallery.js","webpack:///./assets/js/theme/product/admin-images.js"],"names":["Product","context","url","window","location","href","$reviewLink","$","before","next","document","on","indexOf","history","replaceState","title","pathname","loaded","validator","collapsibleFactory","productDetails","ProductDetails","BCData","product_attributes","videoGallery","admin_images","$reviewForm","classifyForm","review","Review","registerValidation","performCheck","areAll","after","productReviewHandler","trigger","PageManager","nod","submit","find","$reviewsContent","$collapsible","initLinkBind","injectPaginationLink","collapseReviews","$content","hasClass","CollapsibleEvents","click","hash","$nextLink","$prevLink","length","attr","add","selector","validate","errorMessage","reviewRating","reviewSubject","reviewComment","cb","val","result","forms","email","reviewEmail","VideoGallery","$element","$player","$videos","currentVideo","bindEvents","selectNewVideo","e","preventDefault","$target","currentTarget","id","data","$selectedThumb","setMainVideo","setActiveThumb","removeClass","addClass","bind","pluginKey","$videoGallery","each","index","element","$el","isInitialized","getImages","IsAdmin","check","authorized","console","info","createDropzones","removeListen","feature_overlay","home","dz_configs","maxFilesize","maxFiles","addRemoveLinks","dictResponseError","acceptedFiles","autoProcessQueue","init","self","el","options","dictRemoveFile","file","files","_i","_len","name","size","lastModifiedDate","toString","removeFile","show","ths","setTimeout","addProductImage","dropzone","Object","assign","fb","subscribe","product","images","placeImages","err","log","imgwrap","html","image","$img","append","i","toArray","obj_obj","keys","map","pretty","obj","JSON","stringify","btn","unbind","removeImage","key","db_path","remove","$overlay","main_thumb","fadeOut","fadeIn"],"mappings":";;;;;;;;;;;;;;;;2yBAAA;;MAYqBA,Q,wDACjB,iBAAYC,OAAZ,CAAqB,yEACjB,uBAAMA,OAAN,CADiB,EAEjB,MAAKC,GAAL,CAAWC,OAAOC,QAAP,CAAgBC,IAA3B,CACA,MAAKC,WAAL,CAAmBC,8CAACA,CAAC,sCAAF,CAAnB,CAHiB,YAIpB,C,kBACDC,M,iBAAOC,I,CAAM,iBACT;AACAF,8CAACA,CAACG,QAAF,EAAYC,EAAZ,CAAe,oBAAf,CAAqC,UAAM,CACvC,GAAI,OAAKT,GAAL,CAASU,OAAT,CAAiB,eAAjB,IAAsC,CAAC,CAAvC,EAA4C,MAAOT,QAAOU,OAAP,CAAeC,YAAtB,GAAuC,UAAvF,CAAmG,CAC/FX,OAAOU,OAAP,CAAeC,YAAf,CAA4B,IAA5B,CAAkCJ,SAASK,KAA3C,CAAkDZ,OAAOC,QAAP,CAAgBY,QAAlE,CACH,CACJ,CAJD,EAMAP,MACH,C,mBAEDQ,M,iBAAOR,I,CAAM,iBACT,GAAIS,iBAAJ,CAEA;AACAC,4EAAkBA,GAElB,KAAKC,cAAL,CAAsB,GAAIC,yEAAJ,CAAmBd,8CAACA,CAAC,oBAAF,CAAnB,CAA4C,KAAKN,OAAjD,CAA0DE,OAAOmB,MAAP,CAAcC,kBAAxE,CAAtB,CAEAC,+EAAYA,GACZC,8EAAYA,GAEZ,GAAMC,aAAcC,gFAAYA,CAAC,mBAAb,CAApB,CACA,GAAMC,QAAS,GAAIC,kEAAJ,CAAWH,WAAX,CAAf,CAEAnB,8CAACA,CAAC,MAAF,EAAUI,EAAV,CAAa,OAAb,CAAsB,sCAAtB,CAA8D,UAAM,CAChEO,UAAYU,OAAOE,kBAAP,CAA0B,OAAK7B,OAA/B,CACf,CAFD,EAIAyB,YAAYf,EAAZ,CAAe,QAAf,CAAyB,UAAM,CAC3B,GAAIO,SAAJ,CAAe,CACXA,UAAUa,YAAV,GACA,MAAOb,WAAUc,MAAV,CAAiB,OAAjB,CACV,CAED,MAAO,MACV,CAPD,EASAvB,MACH,C,mBAEDwB,K,gBAAMxB,I,CAAM,CACR,KAAKyB,oBAAL,GAEAzB,MACH,C,mBAEDyB,oB,gCAAuB,CACnB,GAAI,KAAKhC,GAAL,CAASU,OAAT,CAAiB,eAAjB,IAAsC,CAAC,CAA3C,CAA8C,CAC1C,KAAKN,WAAL,CAAiB6B,OAAjB,CAAyB,OAAzB,CACH,CACJ,C,iBAzDgCC,8D,EAAhBpC,sE;;;;;;;;;;;;;sKCNjB,gBAAY0B,WAAZ,CAAyB,8BACrB,KAAKR,SAAL,CAAiBmB,oEAAGA,CAAC,CACjBC,OAAQZ,YAAYa,IAAZ,CAAiB,sBAAjB,CADS,CAAJ,CAAjB,CAIA,KAAKC,eAAL,CAAuBjC,8CAACA,CAAC,kBAAF,CAAvB,CACA,KAAKkC,YAAL,CAAoBlC,8CAACA,CAAC,oBAAF,CAAwB,KAAKiC,eAA7B,CAApB,CAEA,KAAKE,YAAL,GACA,KAAKC,oBAAL,GACA,KAAKC,eAAL,EACH,CAED;;;wBAIAF,Y,wBAAe,gBACX,GAAMG,UAAWtC,8CAACA,CAAC,yBAAF,CAA6B,KAAKiC,eAAlC,CAAjB,CAEAjC,8CAACA,CAAC,yBAAF,EAA6BI,EAA7B,CAAgC,OAAhC,CAAyC,UAAM,CAC3C,GAAI,CAACkC,SAASC,QAAT,CAAkB,SAAlB,CAAL,CAAmC,CAC/B,MAAKL,YAAL,CAAkBN,OAAlB,CAA0BY,8EAAiBA,CAACC,KAA5C,CACH,CACJ,CAJD,CAKH,C,kBAEDJ,e,2BAAkB,CACd;AACA,GAAIzC,OAAOC,QAAP,CAAgB6C,IAAhB,EAAwB9C,OAAOC,QAAP,CAAgB6C,IAAhB,CAAqBrC,OAArB,CAA6B,kBAA7B,IAAqD,CAAjF,CAAoF,CAChF,MACH,CAED;AACA,KAAK6B,YAAL,CAAkBN,OAAlB,CAA0BY,8EAAiBA,CAACC,KAA5C,CACH,C,CAED;;wBAGAL,oB,gCAAuB,CACnB,GAAMO,WAAY3C,8CAACA,CAAC,yCAAF,CAA6C,KAAKiC,eAAlD,CAAlB,CACA,GAAMW,WAAY5C,8CAACA,CAAC,6CAAF,CAAiD,KAAKiC,eAAtD,CAAlB,CAEA,GAAIU,UAAUE,MAAd,CAAsB,CAClBF,UAAUG,IAAV,CAAe,MAAf,CAA0BH,UAAUG,IAAV,CAAe,MAAf,CAA1B,qBACH,CAED,GAAIF,UAAUC,MAAd,CAAsB,CAClBD,UAAUE,IAAV,CAAe,MAAf,CAA0BF,UAAUE,IAAV,CAAe,MAAf,CAA1B,qBACH,CACJ,C,kBAEDvB,kB,6BAAmB7B,O,CAAS,CACxB,KAAKA,OAAL,CAAeA,OAAf,CACA,KAAKiB,SAAL,CAAeoC,GAAf,CAAmB,CAAC,CAChBC,SAAU,oBADM,CAEhBC,SAAU,UAFM,CAGhBC,aAAc,KAAKxD,OAAL,CAAayD,YAHX,CAAD,CAIhB,CACCH,SAAU,mBADX,CAECC,SAAU,cAFX,CAGCC,aAAc,KAAKxD,OAAL,CAAa0D,aAH5B,CAJgB,CAQhB,CACCJ,SAAU,kBADX,CAECC,SAAU,cAFX,CAGCC,aAAc,KAAKxD,OAAL,CAAa2D,aAH5B,CARgB,CAYhB,CACCL,SAAU,gBADX,CAECC,SAAU,kBAACK,EAAD,CAAKC,GAAL,CAAa,CACnB,GAAMC,QAASC,qEAAKA,CAACC,KAAN,CAAYH,GAAZ,CAAf,CACAD,GAAGE,MAAH,CACH,CALF,CAMCN,aAAc,KAAKxD,OAAL,CAAaiE,WAN5B,CAZgB,CAAnB,EAqBA,MAAO,MAAKhD,SACf,C,kBAEDsC,Q,oBAAW,CACP,MAAO,MAAKtC,SAAL,CAAea,YAAf,EACV,C;;;;;;;;;;;;gJCrFE,GAAMoC,aAAb,YACI,sBAAYC,QAAZ,CAAsB,oCAClB,KAAKC,OAAL,CAAeD,SAAS7B,IAAT,CAAc,qBAAd,CAAf,CACA,KAAK+B,OAAL,CAAeF,SAAS7B,IAAT,CAAc,mBAAd,CAAf,CACA,KAAKgC,YAAL,CAAoB,EAApB,CACA,KAAKC,UAAL,EACH,CANL,uBAQIC,cARJ,yBAQmBC,CARnB,CAQsB,CACdA,EAAEC,cAAF,GAEA,GAAMC,SAAUrE,8CAACA,CAACmE,EAAEG,aAAJ,CAAhB,CAEA,KAAKN,YAAL,CAAoB,CAChBO,GAAIF,QAAQG,IAAR,CAAa,SAAb,CADY,CAEhBC,eAAgBJ,OAFA,CAApB,CAKA,KAAKK,YAAL,GACA,KAAKC,cAAL,EACH,CApBL,wBAsBID,YAtBJ,wBAsBmB,CACX,KAAKZ,OAAL,CAAahB,IAAb,CAAkB,KAAlB,4BAAoD,KAAKkB,YAAL,CAAkBO,EAAtE,CACH,CAxBL,wBA0BII,cA1BJ,0BA0BqB,CACb,KAAKZ,OAAL,CAAaa,WAAb,CAAyB,WAAzB,EACA,KAAKZ,YAAL,CAAkBS,cAAlB,CAAiCI,QAAjC,CAA0C,WAA1C,CACH,CA7BL,wBA+BIZ,UA/BJ,sBA+BiB,CACT,KAAKF,OAAL,CAAa3D,EAAb,CAAgB,OAAhB,CAAyB,KAAK8D,cAAL,CAAoBY,IAApB,CAAyB,IAAzB,CAAzB,CACH,CAjCL,wBAoCe,QAAS7D,aAAT,EAAwB,CACnC,GAAM8D,WAAY,cAAlB,CACA,GAAMC,eAAgBhF,8CAACA,UAAU+E,SAAX,KAAtB,CAEAC,cAAcC,IAAd,CAAmB,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACnC,GAAMC,KAAMpF,8CAACA,CAACmF,OAAF,CAAZ,CACA,GAAME,eAAgBD,IAAIZ,IAAJ,CAASO,SAAT,WAA+BnB,aAArD,CAEA,GAAIyB,aAAJ,CAAmB,CACf,MACH,CAEDD,IAAIZ,IAAJ,CAASO,SAAT,CAAoB,GAAInB,aAAJ,CAAiBwB,GAAjB,CAApB,CACH,CATD,CAUH,C;;;;;;;;ACpDD;AAAA;AAAA;AAAA;AAAA;AAIA,GAAMb,IAAKvE,EAAE,MAAF,EAAU8C,IAAV,CAAe,IAAf,CAAX,CAEe,QAAS5B,aAAT,EAAwB,CACtC;AACAoE,UAAWf,EAAX,EACAgB,gEAAOA,CAACC,KAAR,CAAc,SAASC,UAAT,CAAqB,CAClCC,QAAQC,IAAR,CAAa,SAAb,CAAwBF,UAAxB,EACA,GAAGA,UAAH,CAAe,CACdG,kBACA5F,EAAE,YAAF,EAAgB4E,WAAhB,CAA4B,MAA5B,EAAqC;AACrCiB,cACA,CACD,CAPD,EAQAC,iBACA,CAED,QAASF,gBAAT,EAA2B,CAC1B5F,EAAE,YAAF,EAAgByC,KAAhB,CAAuB,UAAU,CAACzC,EAAE,MAAF,EAAUyC,KAAV,EAAkB,CAApD,EACA,GAAIsD,MAAO,IAAX,CACE,GAAIC,YAAa,CAChBrG,IAAK,YADW,CAElBsG,YAAa,EAFK,CAGlBC,SAAU,EAHQ,CAIlBC,eAAgB,IAJE,CAKlBC,kBAAmB,uBALD,CAMlBC,cAAe,2BANG,CAOlB;AACAC,iBAAkB,IARA,CASfC,KAAK,eAAU,CACjB,GAAIC,MAAO,IAAX,CACA,GAAIC,IAAKD,KAAKE,OAAL,CAAaD,EAAtB,CACA,GAAIlC,IAAKiC,KAAKE,OAAL,CAAanC,EAAtB,CACA;AACAiC,KAAKE,OAAL,CAAaP,cAAb,CAA8B,IAA9B,CACAK,KAAKE,OAAL,CAAaC,cAAb,CAA8B,QAA9B,CACA;AACAH,KAAKpG,EAAL,CAAQ,WAAR,CAAqB,SAAUwG,IAAV,CAAgB,CACpC;AACA;AACA;AACA,GAAI,KAAKC,KAAL,CAAWhE,MAAf,CAAuB,CAChB,GAAIiE,GAAJ,CAAQC,IAAR,CACA,IAAKD,GAAK,CAAL,CAAQC,KAAO,KAAKF,KAAL,CAAWhE,MAA/B,CAAuCiE,GAAKC,KAAO,CAAnD,CAAsDD,IAAtD,CAA4D;AAC5D,CACI,GAAG,KAAKD,KAAL,CAAWC,EAAX,EAAeE,IAAf,GAAwBJ,KAAKI,IAA7B,EAAqC,KAAKH,KAAL,CAAWC,EAAX,EAAeG,IAAf,GAAwBL,KAAKK,IAAlE,EAA0E,KAAKJ,KAAL,CAAWC,EAAX,EAAeI,gBAAf,CAAgCC,QAAhC,KAA+CP,KAAKM,gBAAL,CAAsBC,QAAtB,EAA5H,CACA,CACI,KAAKC,UAAL,CAAgBR,IAAhB,CACH,CACJ,CACJ,CACJ,CAdD,EAeA;AACAJ,KAAKpG,EAAL,CAAQ,SAAR,CAAmB,SAAUwG,IAAV,CAAgB,CAClC5G,EAAE,QAAF,EAAYqH,IAAZ,GACA,GAAIC,KAAM,IAAV,CACAC,WAAY,UAAU,CACrB;AACA;AACCC,gBAAgBZ,IAAhB,CAAsBrC,EAAtB,EACA+C,IAAIF,UAAJ,CAAeE,IAAIT,KAAJ,CAAU,CAAV,CAAf,EACD;AACA,CAND,CAME,IANF,CAOA,CAVD,CAYG,CA7Cc,CAAjB,CAgDA;AACA7G,EAAE,MAAF,EAAUyH,QAAV,CAAmBC,OAAOC,MAAP,CAAc,CAAClB,GAAI,MAAL,CAAalC,GAAIvE,EAAE,MAAF,EAAU8C,IAAV,CAAe,IAAf,CAAjB,CAAd,CAAsDkD,UAAtD,CAAnB,CAEF,CAED,QAASV,UAAT,CAAmBf,EAAnB,CAAuB,CACtBqD,4DAAEA,CAACC,SAAH,aAAyBtD,EAAzB,EAA+BnE,EAA/B,CAAkC,OAAlC,CAA2C,SAAS0H,OAAT,CAAkB,CAC5D,GAAI,CACG,GAAIC,QAASD,QAAQvE,GAAR,GAAcwE,MAA3B,CACAC,YAAYD,MAAZ,CACH,CAAC,MAAME,GAAN,CAAW,CACTvC,QAAQwC,GAAR,CAAY,WAAZ,EACA,GAAMC,SAAUnI,EAAE,oCAAF,EAAwCoI,IAAxC,CAA6C,EAA7C,CACnB,CACD,CARJ,CASA,CAED,QAASJ,YAAT,CAAqBD,MAArB,CAA6B,CAC5B,GAAMI,SAAUnI,EAAE,oCAAF,CAAhB,CACAmI,QAAQC,IAAR,CAAa,EAAb,EACApI,EAAEiF,IAAF,CAAO8C,MAAP,CAAe,SAAS7C,KAAT,CAAgBmD,KAAhB,CAAuB,CACrC;AACA;AACA;AACA;AACG;AACA,GAAIC,sEACkBD,MAAM9D,EADxB,kGAEiD8D,MAAM1I,GAFvD,mEAE4H0I,MAAM1I,GAFlI,yCAE6K0I,MAAM1I,GAFnL,qFAGsE0I,MAAM1I,GAH5E,gBAG8F0I,MAAM1I,GAHpG,iGAAJ,CAMAwI,QAAQI,MAAR,CAAeD,IAAf,CACH,CAbD,EAcAzC,cACA,CAED,QAAS2B,gBAAT,CAAyBZ,IAAzB,CAA+B4B,CAA/B,CAAkC,CACjCZ,4DAAEA,CAACJ,eAAH,CAAmB,SAAnB,CAA8BZ,IAA9B,aAAgD4B,CAAhD,WAA4DA,CAA5D,CACA,CAED,QAASC,QAAT,CAAiBC,OAAjB,CAA0B,CACzB,MAAOhB,QAAOiB,IAAP,CAAYD,OAAZ,EAAqBE,GAArB,CAAyB,kBAAKF,SAAQF,CAAR,CAAL,CAAzB,CACP,CAED,QAASK,OAAT,CAAgBC,GAAhB,CAAqB,CACjB,MAAOC,MAAKC,SAAL,CAAeF,GAAf,CAAoB,IAApB,CAA0B,CAA1B,CACV,CAED,QAASjD,aAAT,EAAwB,CACvB,GAAMoD,KAAMjJ,EAAE,SAAF,CAAZ,CACAiJ,IAAIC,MAAJ,GACAD,IAAIxG,KAAJ,CAAW,SAAS0B,CAAT,CAAY,CACtB8E,IAAIC,MAAJ,GACAC,YAAYnJ,EAAE,IAAF,EAAQ8C,IAAR,CAAa,OAAb,CAAZ,CACA,CAHD,CAIA,CAED,QAASqG,YAAT,CAAqBC,GAArB,CAA0B,CACzB,GAAMC,qBAAsB9E,EAAtB,YAAmC6E,GAAzC,CACAxB,4DAAEA,CAAC0B,MAAH,CAAUD,OAAV,EACAxD,cACA,CAGD,QAASC,gBAAT,EAA2B,CAC1B,GAAMlE,SAAU5B,EAAE,YAAF,CAAhB,CAEA4B,QAAQa,KAAR,CAAe,UAAW,CACzBzC,EAAE,qBAAF,EAAyBkJ,MAAzB,GACA,GAAMK,UAAWvJ,EAAE,eAAF,CAAjB,CACA,GAAMwJ,YAAaxJ,EAAE,wCAAF,CAAnB,CACA,GAAGuJ,SAAShH,QAAT,CAAkB,KAAlB,CAAH,CAA4B,CAC3BgH,SAASE,OAAT,GAAmB7E,WAAnB,CAA+B,KAA/B,EACAhD,QAAQgD,WAAR,CAAoB,MAApB,EACA,MACA,CACD4E,WAAW/G,KAAX,GACA8G,SAASG,MAAT,GAAkB7E,QAAlB,CAA2B,KAA3B,EACAjD,QAAQiD,QAAR,CAAiB,MAAjB,EACA0C,WAAY,UAAW,CACtBvH,EAAE,qBAAF,EAAyByC,KAAzB,CAAgC,UAAW,CAC1C8G,SAASE,OAAT,GAAmB7E,WAAnB,CAA+B,KAA/B,EACAhD,QAAQgD,WAAR,CAAoB,MAApB,CACA,CAHD,CAIA,CALD,CAKG,IALH,CAOA,CAnBD,CAoBA,C","file":"theme-bundle.chunk.1.js","sourcesContent":["/*\n Import all product specific js\n */\nimport $ from 'jquery';\nimport PageManager from './page-manager';\nimport Review from './product/reviews';\nimport collapsibleFactory from './common/collapsible';\nimport ProductDetails from './common/product-details';\nimport videoGallery from './product/video-gallery';\nimport admin_images from './product/admin-images';\nimport { classifyForm } from './common/form-utils';\n\nexport default class Product extends PageManager {\n    constructor(context) {\n        super(context);\n        this.url = window.location.href;\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n    }\n    before(next) {\n        // Listen for foundation modal close events to sanitize URL after review.\n        $(document).on('close.fndtn.reveal', () => {\n            if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n                window.history.replaceState(null, document.title, window.location.pathname);\n            }\n        });\n\n        next();\n    }\n\n    loaded(next) {\n        let validator;\n\n        // Init collapsible\n        collapsibleFactory();\n\n        this.productDetails = new ProductDetails($('[data-productPage]'), this.context, window.BCData.product_attributes);\n\n        videoGallery();\n        admin_images();\n\n        const $reviewForm = classifyForm('.writeReview-form');\n        const review = new Review($reviewForm);\n\n        $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\n            validator = review.registerValidation(this.context);\n        });\n\n        $reviewForm.on('submit', () => {\n            if (validator) {\n                validator.performCheck();\n                return validator.areAll('valid');\n            }\n\n            return false;\n        });\n\n        next();\n    }\n\n    after(next) {\n        this.productReviewHandler();\n\n        next();\n    }\n\n    productReviewHandler() {\n        if (this.url.indexOf('#write_review') !== -1) {\n            this.$reviewLink.trigger('click');\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product.js","import $ from 'jquery';\nimport nod from '../common/nod';\nimport { CollapsibleEvents } from '../common/collapsible';\nimport forms from '../common/models/forms';\n\nexport default class {\n    constructor($reviewForm) {\n        this.validator = nod({\n            submit: $reviewForm.find('input[type=\"submit\"]'),\n        });\n\n        this.$reviewsContent = $('#product-reviews');\n        this.$collapsible = $('[data-collapsible]', this.$reviewsContent);\n\n        this.initLinkBind();\n        this.injectPaginationLink();\n        this.collapseReviews();\n    }\n\n    /**\n     * On initial page load, the user clicks on \"(12 Reviews)\" link\n     * The browser jumps to the review page and should expand the reviews section\n     */\n    initLinkBind() {\n        const $content = $('#productReviews-content', this.$reviewsContent);\n\n        $('.productView-reviewLink').on('click', () => {\n            if (!$content.hasClass('is-open')) {\n                this.$collapsible.trigger(CollapsibleEvents.click);\n            }\n        });\n    }\n\n    collapseReviews() {\n        // We're in paginating state, do not collapse\n        if (window.location.hash && window.location.hash.indexOf('#product-reviews') === 0) {\n            return;\n        }\n\n        // force collapse on page load\n        this.$collapsible.trigger(CollapsibleEvents.click);\n    }\n\n    /**\n     * Inject ID into the pagination link\n     */\n    injectPaginationLink() {\n        const $nextLink = $('.pagination-item--next .pagination-link', this.$reviewsContent);\n        const $prevLink = $('.pagination-item--previous .pagination-link', this.$reviewsContent);\n\n        if ($nextLink.length) {\n            $nextLink.attr('href', `${$nextLink.attr('href')} #product-reviews`);\n        }\n\n        if ($prevLink.length) {\n            $prevLink.attr('href', `${$prevLink.attr('href')} #product-reviews`);\n        }\n    }\n\n    registerValidation(context) {\n        this.context = context;\n        this.validator.add([{\n            selector: '[name=\"revrating\"]',\n            validate: 'presence',\n            errorMessage: this.context.reviewRating,\n        }, {\n            selector: '[name=\"revtitle\"]',\n            validate: 'min-length:2',\n            errorMessage: this.context.reviewSubject,\n        }, {\n            selector: '[name=\"revtext\"]',\n            validate: 'min-length:2',\n            errorMessage: this.context.reviewComment,\n        }, {\n            selector: '[name=\"email\"]',\n            validate: (cb, val) => {\n                const result = forms.email(val);\n                cb(result);\n            },\n            errorMessage: this.context.reviewEmail,\n        }]);\n\n        return this.validator;\n    }\n\n    validate() {\n        return this.validator.performCheck();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product/reviews.js","import $ from 'jquery';\n\nexport class VideoGallery {\n    constructor($element) {\n        this.$player = $element.find('[data-video-player]');\n        this.$videos = $element.find('[data-video-item]');\n        this.currentVideo = {};\n        this.bindEvents();\n    }\n\n    selectNewVideo(e) {\n        e.preventDefault();\n\n        const $target = $(e.currentTarget);\n\n        this.currentVideo = {\n            id: $target.data('videoId'),\n            $selectedThumb: $target,\n        };\n\n        this.setMainVideo();\n        this.setActiveThumb();\n    }\n\n    setMainVideo() {\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\n    }\n\n    setActiveThumb() {\n        this.$videos.removeClass('is-active');\n        this.currentVideo.$selectedThumb.addClass('is-active');\n    }\n\n    bindEvents() {\n        this.$videos.on('click', this.selectNewVideo.bind(this));\n    }\n}\n\nexport default function videoGallery() {\n    const pluginKey = 'videoGallery';\n    const $videoGallery = $(`[data-${pluginKey}]`);\n\n    $videoGallery.each((index, element) => {\n        const $el = $(element);\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n\n        if (isInitialized) {\n            return;\n        }\n\n        $el.data(pluginKey, new VideoGallery($el));\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product/video-gallery.js","import Dropzone from 'dropzone';\nimport {fb} from '../common/firebase';\nimport {IsAdmin} from '../common/isadmin';\n\nconst id = $(\"[dz]\").attr('dz');\n\nexport default function admin_images() {\n\t// fb.write('images/test_sku/', {'hello': 'world'})\n\tgetImages( id );\n\tIsAdmin.check(function(authorized) {\n\t\tconsole.info('admin: ', authorized);\n\t\tif(authorized) {\n\t\t\tcreateDropzones();\n\t\t\t$('.admin-add').removeClass('hide'); // reveal Plus\n\t\t\tremoveListen();\n\t\t}\n\t});\n\tfeature_overlay();\n}\n\nfunction createDropzones() {\n\t$('[dz-alter]').click( function(){$(\"[dz]\").click()})\n\tvar home = this;\n  \tvar dz_configs = {\n\t  \turl: \"/file/post\",\n\t\tmaxFilesize: 10,\n\t\tmaxFiles: 20,\n\t\taddRemoveLinks: true,\n\t\tdictResponseError: 'Server not Configured',\n\t\tacceptedFiles: \".png,.jpg,.gif,.bmp,.jpeg\",\n\t\t// previewTemplate: $('.prevv').html(),\n\t\tautoProcessQueue: true,\n\t    init:function(){\n\t\t\tvar self = this;\n\t\t\tvar el = self.options.el;\n\t\t\tvar id = self.options.id;\n\t\t\t// config\n\t\t\tself.options.addRemoveLinks = true;\n\t\t\tself.options.dictRemoveFile = \"Delete\";\n\t\t\t//New file added\n\t\t\tself.on(\"addedfile\", function (file) {\n\t\t\t\t// if (this.files[1]!=null){\n\t\t\t //        this.removeFile(this.files[0]);\n\t\t\t //    }\n\t\t\t\tif (this.files.length) {\n\t\t\t        var _i, _len;\n\t\t\t        for (_i = 0, _len = this.files.length; _i < _len - 1; _i++) // -1 to exclude current file\n\t\t\t        {\n\t\t\t            if(this.files[_i].name === file.name && this.files[_i].size === file.size && this.files[_i].lastModifiedDate.toString() === file.lastModifiedDate.toString())\n\t\t\t            {\n\t\t\t                this.removeFile(file);\n\t\t\t            }\n\t\t\t        }\n\t\t\t    }\n\t\t\t});\n\t\t\t// Send file starts\n\t\t\tself.on(\"sending\", function (file) {\n\t\t\t\t$('.meter').show();\n\t\t\t\tvar ths = this;\n\t\t\t\tsetTimeout( function(){\n\t\t\t\t\t// preview\n\t\t\t\t\t// $(el).find('.button.save').click( function(){\n\t\t\t\t\t\taddProductImage(file, id);\n\t\t\t\t\t\tths.removeFile(ths.files[0]);\n\t\t\t\t\t// });\n\t\t\t\t},1000);\n\t\t\t});\n\n\t    }\n\t  };\n\n\t  // creatDropzones\n\t  $(\"[dz]\").dropzone(Object.assign({el: '[dz]', id: $(\"[dz]\").attr('dz')}, dz_configs));\n\n}\n\nfunction getImages(id) {\n\tfb.subscribe(`products/${id}`).on('value', function(product) {\n\t\ttry {\n\t        var images = product.val().images;\n\t        placeImages(images);\n\t    } catch(err) {\n\t        console.log('NO IMAGES');\n\t        const imgwrap = $('.productView-thumbnails .databased').html('');\n\t    }\n    });\n}\n\nfunction placeImages(images) {\n\tconst imgwrap = $('.productView-thumbnails .databased');\n\timgwrap.html('')\n\t$.each(images, function(index, image) {\n\t\t// var $img = document.createElement(\"IMG\");\n\t\t// $img.setAttribute(\"src\", image.url);\n\t //    $img.setAttribute(\"width\", \"304\");\n\t //    $img.setAttribute(\"height\", \"228\");\n\t    // $img.setAttribute(\"alt\", \"The Pulpit Rock\");\n\t    var $img = `<li class=\"productView-thumbnail\">\n            <span dz-rm=\"${image.id}\"><i class=\"fa fa-trash\"></i></span>\n            <a class=\"productView-thumbnail-link\" href=\"${image.url}\" data-image-gallery-item=\"\" data-image-gallery-new-image-url=\"${image.url}\" data-image-gallery-zoom-image-url=\"${image.url}\">\n                <img class=\"lazyautosizes lazyloaded\" data-sizes=\"auto\" src=\"${image.url}\" data-src=\"${image.url}\" alt=\"Collins (Youth)\" title=\"Collins (Youth)\" sizes=\"50px\">\n            </a>\n        </li>`;\n\t    imgwrap.append($img);\n\t});\n\tremoveListen();\n}\n\nfunction addProductImage(file, i) {\n\tfb.addProductImage('product', file, `products/${i}/images`, i);\n}\n\nfunction toArray(obj_obj) {\n\treturn Object.keys(obj_obj).map(i => obj_obj[i]);\n}\n\nfunction pretty(obj) {\n    return JSON.stringify(obj, null, 2)\n}\n\nfunction removeListen() {\n\tconst btn = $('[dz-rm]');\t\n\tbtn.unbind();\n\tbtn.click( function(e) {\n\t\tbtn.unbind();\n\t\tremoveImage($(this).attr('dz-rm'))\n\t})\n}\n\nfunction removeImage(key) {\n\tconst db_path = `products/${id}/images/${key}`;\n\tfb.remove(db_path);\n\tremoveListen();\n}\n\n\nfunction feature_overlay() {\n\tconst trigger = $('a.features');\n\t\n\ttrigger.click( function() {\n\t\t$('.productView-images').unbind();\n\t\tconst $overlay = $('.overlay-feat');\n\t\tconst main_thumb = $('li.productView-thumbnail:first-child a');\n\t\tif($overlay.hasClass('act')){\n\t\t\t$overlay.fadeOut().removeClass('act');\n\t\t\ttrigger.removeClass('blue');\n\t\t\treturn;\n\t\t}\n\t\tmain_thumb.click();\n\t\t$overlay.fadeIn().addClass('act');\n\t\ttrigger.addClass('blue');\n\t\tsetTimeout( function() {\n\t\t\t$('.productView-images').click( function() {\n\t\t\t\t$overlay.fadeOut().removeClass('act');\n\t\t\t\ttrigger.removeClass('blue');\n\t\t\t})\n\t\t}, 1000);\n\n\t});\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/product/admin-images.js"],"sourceRoot":""}