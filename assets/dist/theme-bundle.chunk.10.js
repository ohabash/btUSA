webpackJsonp([10],{

/***/ 440:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__page_manager__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_firebase__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__bigcommerce_stencil_utils__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jsrender__ = __webpack_require__(423);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jsrender___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_jsrender__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__common_isadmin__ = __webpack_require__(162);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}// var jsrender = require('jsrender');
// export const faq = {
//     init: function(){
//     }
// }
// faq.init();
var faq=function(_PageManager){_inherits(faq,_PageManager);function faq(){_classCallCheck(this,faq);return _possibleConstructorReturn(this,_PageManager.apply(this,arguments))}faq.prototype.loaded=function loaded(next){this.admin();this.getFaqs();// this.addFaq('category2','qq2','aa2')
next()};faq.prototype.admin=function admin(){var self=this;__WEBPACK_IMPORTED_MODULE_5__common_isadmin__["a" /* IsAdmin */].check(function(authorized){console.info('admin: ',authorized);window.admin=authorized;if(authorized){self.rightClick()}})};faq.prototype.getFaqs=function getFaqs(){var self=this;return __WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].subscribe('faqs').on('value',function(snapshot){var data=snapshot.val();window.FAQs=data;// let ifData = Object.keys(data).length;
// if (data !== null){
self.renderCategories(data);// }
// else {
// 	var categories = Object.values([data][0]);
// 	self.load_add_form(categories);
// }
})};faq.prototype.renderCategories=function renderCategories(faqs){// category tabs
var self=this;var tmpl=__WEBPACK_IMPORTED_MODULE_1_jquery___default.a.templates('#tabs_markup');try{var categories=Object.values([faqs][0])}catch(err){var categories=[]}var html=tmpl.render(categories);// ready for insertion...
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-tabs]').html(html);// category content
var tmpl=__WEBPACK_IMPORTED_MODULE_1_jquery___default.a.templates('#category_markup');var html=tmpl.render(categories);// ready for insertion...
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories]').html(html);// category select (admin)
this.load_add_form(categories);this.accordions();setTimeout(function(){self.tabListener()},500)};faq.prototype.load_add_form=function load_add_form(categories){if(admin){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select] option.added').remove();var tmpl=__WEBPACK_IMPORTED_MODULE_1_jquery___default.a.templates('#category_select');var html=tmpl.render(categories);// ready for insertion...
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select]').append(html);this.category_selected()}};faq.prototype.renderItems=function renderItems(catSlug){console.log(catSlug);var tmpl=__WEBPACK_IMPORTED_MODULE_1_jquery___default.a.templates('#questions_markup');var questions=Object.values([FAQs[catSlug]][0]);var html=tmpl.render(questions);// ready for insertion...
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-questions-'+catSlug+']').html(html);this.accordions()};faq.prototype.tabListener=function tabListener(){var self=this;// default to placing-an-order
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-slug="placing-an-order"]').closest('li').addClass('active');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.tab-pane#placing-an-order').addClass('active');self.renderItems('placing-an-order');// trigger
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-slug]').click(function(){self.renderItems(__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).data('slug'))})};faq.prototype.addFaq=function addFaq(category,q,a){var slug=this.slugify(category);var data={q:q,a:a,in:slug};__WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].post('faqs/'+slug,data);__WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].write('faqs/'+slug+'/name',category);__WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].write('faqs/'+slug+'/slug',slug)};faq.prototype.updateFaq=function updateFaq(target,q,a){__WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].write('faqs/'+target.path+'/q',q);__WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].write('faqs/'+target.path+'/a',a)};faq.prototype.removeFaq=function removeFaq(path){__WEBPACK_IMPORTED_MODULE_2__common_firebase__["a" /* fb */].remove('faqs/'+path)};faq.prototype.slugify=function slugify(Text){return Text.toLowerCase().replace(/ /g,'-').replace(/[^\w-]+/g,'')};faq.prototype.accordions=function accordions(){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.container.xx').removeClass('container');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('body.inside header').css('margin',0);//uses classList, setAttribute, and querySelectorAll
//if you want this to work in IE8/9 youll need to polyfill these
(function(){var d=document,accordionToggles=d.querySelectorAll('.js-accordionTrigger'),setAria,setAccordionAria,switchAccordion,touchSupported='ontouchstart'in window,pointerSupported='pointerdown'in window;function skipClickDelay(e){e.preventDefault();e.target.click()}function setAriaAttr(el,ariaType,newProperty){el.setAttribute(ariaType,newProperty)};function setAccordionAria(el1,el2,expanded){switch(expanded){case'true':setAriaAttr(el1,'aria-expanded','true');setAriaAttr(el2,'aria-hidden','false');break;case'false':setAriaAttr(el1,'aria-expanded','false');setAriaAttr(el2,'aria-hidden','true');break;default:break;}};//function
function switchAccordion(e){e.preventDefault();var thisAnswer=e.target.parentNode.nextElementSibling;var thisQuestion=e.target;if(thisAnswer.classList.contains('is-collapsed')){setAccordionAria(thisQuestion,thisAnswer,'true')}else{setAccordionAria(thisQuestion,thisAnswer,'false')}thisQuestion.classList.toggle('is-collapsed');thisQuestion.classList.toggle('is-expanded');thisAnswer.classList.toggle('is-collapsed');thisAnswer.classList.toggle('is-expanded');thisAnswer.classList.toggle('animateIn')};for(var i=0,len=accordionToggles.length;i<len;i++){if(touchSupported){// accordionToggles[i].addEventListener('touchstart', skipClickDelay, false);
}if(pointerSupported){// accordionToggles[i].addEventListener('pointerdown', skipClickDelay, false);
}accordionToggles[i].addEventListener('click',switchAccordion,false)}})();// setTimeout( function(){
// 	$('ul[role="tablist"] li:first a')[0].click();
// },600);
};faq.prototype.category_selected=function category_selected(){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select]').on('change',function(){if(this.value=='new'){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('input#category').val('');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('p.p-new').removeClass('hide')}else{__WEBPACK_IMPORTED_MODULE_1_jquery___default()('p.p-new').addClass('hide');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('p.p-new input').val(__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).val())}})};faq.prototype.rightClick=function rightClick(){var scope=this;__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#faq').bind('contextmenu',function(event){event.preventDefault();window.target={id:__WEBPACK_IMPORTED_MODULE_1_jquery___default()(event.target).data('id'),in:__WEBPACK_IMPORTED_MODULE_1_jquery___default()(event.target).data('in'),question:__WEBPACK_IMPORTED_MODULE_1_jquery___default()(event.target).html(),answer:__WEBPACK_IMPORTED_MODULE_1_jquery___default()(event.target).closest('dt').next('dd').find('p').html()};target['path']=target.in+'/'+target.id;if(target.in!==undefined){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select]').val(target.in);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#category').val(target.in);// $("#categoryS").attr("disabled", "disabled"); //Cant change category yet
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#question').val(target.question);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#answer').val(target.answer);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('a.red').removeClass('hide');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('a.red').dblclick(function(){scope.removeFaq(target.path)})}else{// $("#categoryS").attr("disabled", "false"); //Can change category
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('a.red').addClass('hide');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('form#contextForm input').not(':input[type=submit]').val('');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select]').val(__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select] option:first').val())}__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').show().css({top:event.pageY+15,left:event.pageX+10})});__WEBPACK_IMPORTED_MODULE_1_jquery___default()(document).click(function(){var isHovered=__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').is(':hover');if(isHovered==false){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').fadeOut('fast')}});__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#contextForm').submit(function(e){e.preventDefault();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').fadeOut('fast');scope.contextSubmit(__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this),target)})};faq.prototype.contextSubmit=function contextSubmit(form,target){var d={question:form.find('#question').val(),category:form.find('#category').val(),answer:form.find('#answer').val()};var slug=this.slugify(d.category);form.find('input').not(':input[type=submit]').val('');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select]').val(__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-categories-select] option:first').val());if(target.in===undefined){this.addFaq(d.category,d.question,d.answer)}else{this.updateFaq(target,d.question,d.answer)}};return faq}(__WEBPACK_IMPORTED_MODULE_0__page_manager__["a" /* default */]);/* harmony default export */ __webpack_exports__["default"] = (faq);

/***/ })

});
//# sourceMappingURL=theme-bundle.chunk.10.js.map