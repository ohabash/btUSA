webpackJsonp([9],{

/***/ 435:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__page_manager__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_dropzone__ = __webpack_require__(165);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_dropzone___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_dropzone__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_firebase__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_isadmin__ = __webpack_require__(163);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Home=function(_PageManager){_inherits(Home,_PageManager);function Home(){_classCallCheck(this,Home);return _possibleConstructorReturn(this,_PageManager.apply(this,arguments))}Home.prototype.loaded=function loaded(next){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('body').removeClass('inside');this.getHomeData();// this.pressCar();
this.admin();next()};Home.prototype.admin=function admin(){var self=this;__WEBPACK_IMPORTED_MODULE_4__common_isadmin__["a" /* IsAdmin */].check(function(authorized){console.info('admin: ',authorized);if(authorized){self.createDropzones();self.rightClick();self.rightClick_press()}});// console.log(isAdmin)
};//  /$$$$$$$
// | $$__  $$
// | $$  \ $$ /$$$$$$   /$$$$$$   /$$$$$$$ /$$$$$$$
// | $$$$$$$//$$__  $$ /$$__  $$ /$$_____//$$_____/
// | $$____/| $$  \__/| $$$$$$$$|  $$$$$$|  $$$$$$
// | $$     | $$      | $$_____/ \____  $$\____  $$
// | $$     | $$      |  $$$$$$$ /$$$$$$$//$$$$$$$/
// |__/     |__/       \_______/|_______/|_______/
Home.prototype.pressCar=function pressCar(){var press_data=void 0;var self=this;var pressCar=__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.pressCar');__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].subscribe('quotes').on('value',function(snapshot){pressCar.html('');press_data=snapshot.val();// console.log(press_data);
__WEBPACK_IMPORTED_MODULE_1_jquery___default.a.each(press_data,function(i,entry){// console.log(entry);
var markup='<div class="logo column is-3" data-ref="'+entry.href+'" data-id="'+entry.id+'" data-quote="'+entry.quote+'"> <img class="logo-img" src="'+entry.img+'"> </div>';pressCar.append(markup)});// self.start_press_car(pressCar);
})};Home.prototype.start_press_car=function start_press_car(pressCar){// if( $('.slick-initialized').length ) {
// 	// pressCar.slick("unslick");
// }else {
pressCar.not('.slick-initialized').slick({slidesToShow:5,slidesToScroll:1,autoplay:true,centerMode:true,autoplaySpeed:3000,focusOnSelect:true,responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:3}}]});pressCar.on('afterChange',function(e,slick,i){var current=slick.$slides[i];var quote=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(current).attr('data-quote');var href=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(current).attr('data-ref');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.quote.d span').text(quote);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.quote.d a').attr('href',href)});// }
};Home.prototype.rightClick_press=function rightClick_press(){var home=this;var isUpdate='';var current_id=void 0;__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.press').bind('contextmenu',function(e){event.preventDefault();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.contextMenu_press input[type="text"]').val('');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu_press').show().css({top:event.pageY+15,left:event.pageX+10});var zone=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).data('zone');isUpdate=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(e.target).hasClass('logo-img');if(isUpdate){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.contextMenu_press input[type="submit"]').removeClass('blue-bg yellow-bg').addClass('green-bg').val('Update');var item=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(e.target).closest('.logo');// item.css('border','3px solid red')
current_id=item.data('id');home.populate_form(item);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('input#id').show();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.rmv').show()}else{__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.contextMenu_press input[type="submit"]').removeClass('green-bg blue-bg').addClass('blue-bg').val('Publish');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('input#id').hide();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.rmv').hide()}});__WEBPACK_IMPORTED_MODULE_1_jquery___default()(document).click(function(){var isHovered=__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu_press').is(':hover');if(isHovered==false){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu_press').fadeOut('fast')}});__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#pressForm').submit(function(e){e.preventDefault();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu_press').fadeOut('fast');if(isUpdate){home.press_update(__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this))}else{home.press_post(__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this))}});__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.rmv').click(function(){__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].remove('quotes/'+current_id);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.rmv').hide();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.contextMenu_press input[type="submit"]').removeClass('blue-bg green-bg').addClass('yellow-bg').val('Undo Delete')})};Home.prototype.populate_form=function populate_form($item){var form=__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#pressForm');form.find('#id').val($item.data('id'));form.find('#href').val($item.data('ref'));form.find('#quote').val($item.data('quote'));form.find('#img').val($item.find('img').attr('src'))};Home.prototype.press_post=function press_post(form){console.log('post');var data={img:form.find('#img').val(),quote:form.find('#quote').val(),href:form.find('#href').val()};__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].post('quotes/',data)};Home.prototype.press_update=function press_update(form){console.log('update');var data={img:form.find('#img').val(),quote:form.find('#quote').val(),href:form.find('#href').val(),id:form.find('#id').val()};__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].write('quotes/'+data.id,data);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.contextMenu_press input').val('')};Home.prototype.getHomeData=function getHomeData(){console.log('getHomeData');__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].subscribe('home').on('value',function(snapshot){var home_data=snapshot.val();console.log('home_data',home_data);// zones
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-zone]').each(function(i,zone){var zone_id=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(zone).data('zone');var image_url=home_data[zone_id].image||null;var image_alt=home_data[zone_id].alt||null;var link=home_data[zone_id].path||null;var $img=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(zone).find('img');var $link=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(zone).find('a');$img.attr('src',image_url);$img.attr('alt',image_alt);$link.attr('href',link)})})};Home.prototype.createDropzones=function createDropzones(){console.log('createDropzones()');var home=this;var dz_configs={url:'/file/post',maxFilesize:5,maxFiles:1,addRemoveLinks:true,dictResponseError:'Server not Configured',acceptedFiles:'.png,.jpg,.gif,.bmp,.jpeg',previewTemplate:__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.prevv').html(),autoProcessQueue:true,init:function init(){var self=this;var el=self.options.el;var prevEl=self.options.previewsContainer;// config
self.options.addRemoveLinks=true;self.options.dictRemoveFile='Delete';//New file added
self.on('addedfile',function(file){if(this.files[1]!=null){this.removeFile(this.files[0])}});// Send file starts
self.on('sending',function(file){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('.meter').show();var ths=this;setTimeout(function(){// preview
__WEBPACK_IMPORTED_MODULE_1_jquery___default()(el).find(prevEl+' img').attr('src',file.dataURL);__WEBPACK_IMPORTED_MODULE_1_jquery___default()(el).find(prevEl).removeClass('hide');__WEBPACK_IMPORTED_MODULE_1_jquery___default()(el).find('.button.save').click(function(){home.publish_img(file,el.replace(']','').replace('[',''));ths.removeFile(ths.files[0])})},1000)})}};// creatDropzones
__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[dz1]').dropzone(Object.assign({el:'[dz1]',previewsContainer:'[upload-preview-dz1]'},dz_configs));__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[dz2]').dropzone(Object.assign({el:'[dz2]',previewsContainer:'[upload-preview-dz2]'},dz_configs));__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[dz3]').dropzone(Object.assign({el:'[dz3]',previewsContainer:'[upload-preview-dz3]'},dz_configs));__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[dz5]').dropzone(Object.assign({el:'[dz5]',previewsContainer:'[upload-preview-dz5]'},dz_configs));__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[dz6]').dropzone(Object.assign({el:'[dz6]',previewsContainer:'[upload-preview-dz6]'},dz_configs));__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[dz7]').dropzone(Object.assign({el:'[dz7]',previewsContainer:'[upload-preview-dz7]'},dz_configs))};Home.prototype.rightClick=function rightClick(){var home=this;__WEBPACK_IMPORTED_MODULE_1_jquery___default()('[data-zone]').bind('contextmenu',function(event){event.preventDefault();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').show().css({top:event.pageY+15,left:event.pageX+10});var zone=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).data('zone');var dims=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).data('dims');var img_url=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).find('img').attr('src');var img_alt=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).find('img').attr('alt');var link=__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this).find('a').attr('href');__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu span.zone_id').html(zone);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu input.zone').val(zone);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu p.dims').html(dims);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu input.image').val(img_url);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu input.alt').val(img_alt);__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu input.path').val(link)});__WEBPACK_IMPORTED_MODULE_1_jquery___default()(document).click(function(){var isHovered=__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').is(':hover');if(isHovered==false){__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').fadeOut('fast')}});__WEBPACK_IMPORTED_MODULE_1_jquery___default()('#contextForm').submit(function(e){console.log(e);e.preventDefault();__WEBPACK_IMPORTED_MODULE_1_jquery___default()('ul.contextMenu').fadeOut('fast');home.contextSubmit(__WEBPACK_IMPORTED_MODULE_1_jquery___default()(this))})};Home.prototype.contextSubmit=function contextSubmit(form){var data={zone:form.find('input[name="zone"]').val(),path:form.find('input[name="path"]').val(),image:form.find('input[name="image"]').val(),alt:form.find('input[name="alt"]').val()};console.log('data: ',data);__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].write('home/'+data.zone,data);console.log('submit')};Home.prototype.publish_img=function publish_img(file,filename){console.log(' ==== saving ====> ',file);__WEBPACK_IMPORTED_MODULE_3__common_firebase__["a" /* fb */].addImage('home',filename,file)};return Home}(__WEBPACK_IMPORTED_MODULE_0__page_manager__["a" /* default */]);/* harmony default export */ __webpack_exports__["default"] = (Home);

/***/ })

});
//# sourceMappingURL=theme-bundle.chunk.9.js.map